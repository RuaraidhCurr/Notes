**Epos Now payments cannot be used by a customer until the KYC process has been completed.**

## Supporting Documents
*https://eposnow.atlassian.net/browse/PI-367* 
Before Epos Now payments can be activated & dispatched, the Supporting Documents must be uploaded via the Backoffice Tab within the Epos Now Payments section
![](https://lh7-us.googleusercontent.com/pHssGVq4KvOsn6I8HR-LRnwUW3hK0gWTcbvaFmxwEkJX6N4Xf0QqSOZ_TiSbQTQAuUXYWAxv4vshSluCuoQCER-ogzoXiHwy37J8dOMBD-D5B--o_oWlytQzN9ePlUfgZSvq8iyUHigK6NLIU36Fpw)
![](https://lh7-us.googleusercontent.com/T7A0R8vlRbSCdXVwqTOQDhhhl_qL-LtQJb4P_0vBzoAF3fVWZR63Ad3QtovW5pMXSLLtOaUWlgBVN-UKlQbQvNehYq4NS4GOt3KGj12IE0tsCfON_AvEGKven4bh8nItQ9eUXXIyxcql5XCMq2TyGQ)

Once uploaded a link to view the document is shown. The uploaded documents is attached to the account record and its permissions changed to prevent sharing of deletion except but Admins. 

## Email Communication
*https://eposnow.atlassian.net/browse/PI-370*

During the KYC process. status updates will be submitted from the Backoffice to Salesforce via the **RESTPutPaymentStatus** with a request in the format of **KYCStatusJSON**
### Authentication

- The request is authenticated using your choice of AuthorizationToken header which is token generated by encrypting the provided **Customers GUID** with the Backoffice standard **Private Key** using the **HmacSHA256 Encryption Algorithm**
*E.G Using EncryptionClass.generateSignatureWithKey(valueToEncrypt, secretKey);* 

If the Authorization Token does no match your provided data then you will receive a **401 - Unauthorized** response.
If the request is successful then you will receive a **200 - OK** response. 

Example JSON Request Show Below:
```JSON
{
"CompanyGuid" : "d1a51404-c607-4294-830f-079a9149e93b",  
"Deadline" : "2021-12-31",  
"Description" : "KYC issue: please return and update info"  
}
```

**The following fields will be populated on an Account record from the received data:**
- `KYC_Status__c`
- `KYC_Deadline__c`
- `KYC_Successful__c`

## KYC Completion Status 
*https://eposnow.atlassian.net/browse/PI-368*
The same ednpoint as above (**RESTPutPaymentStatus**) can be used to confirm when KYC is started or completed, setting **`KYC_Successful__c`** field on the account. KYC is only comepleted once per customer. 
```JSON
{  
"CompanyGuid" : "d1a51404-c607-4294-830f-079a9149e93b",
"KYC-started" : "2021-07-07 00:00",  
"IsKycSuccessful" : true  
}
```
### Activation & Dispatch
When this endpoint updates the account, if the following is complete: 
- KYC Successful
- KYC Support Documentation is provided and Terms Accepted
- Trigger fired to run the method to activate payment and dispatch the hardware
(The existing subscription is updated to activate billing for the Epos Now Payment subscription for the customer. A new order is then generated to dispatch the hardware, the delivery date will be copied from the original order if this is in the future **Orders containing the Epos Now Payment System will nbot be subject to the normal 5-7 dau delay in delivery time**)

## KYC Progress Tracking
*https://eposnow.atlassian.net/browse/PI-332*
Support rep can check the progress of a customer through the KYC process.
![](https://lh7-us.googleusercontent.com/EIewj0_Rd6kKK8s0FqEGd0IEcWLYOyL1c_QFE9XaHVppQdYCzcBnkpYLb3ZbR4mDBAgxjKAhumu7bDwI3HvawjXyVoWCkeROyhBKpSI3V949GhH-oLK9NwNm6NnlDx92YhXj7dnHKuRee0bCbiYsfQ)On a salesforce account under the backoffice tab there is a lwcKYVProcess Lightning Web Component. This component calls the https://www.testeposnowhq.com/api/admin/Payments/GetAccountHolderInfo endpoint on load to fetch the current KYC status details in **AdyenPaymentsJSON** 